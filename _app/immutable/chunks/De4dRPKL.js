var f=t=>{throw TypeError(t)};var u=(t,e,a)=>e.has(t)||f("Cannot "+a);var i=(t,e,a)=>(u(t,e,"read from private field"),a?a.call(t):e.get(t)),c=(t,e,a)=>e.has(t)?f("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),y=(t,e,a,r)=>(u(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),m=(t,e,a)=>(u(t,e,"access private method"),a);import{AbstractStorage as b}from"./CKJPb_Hd.js";import{u as D}from"./Da9-NLMC.js";const v="cobalt-processing-data";var g,n,o,l,h,A;class w extends b{constructor(a,r,s){super();c(this,g);c(this,n);c(this,o);y(this,g,a),y(this,n,r),y(this,o,s)}static async init(){const r=await(await navigator.storage.getDirectory()).getDirectoryHandle(v,{create:!0}),s=await r.getFileHandle(D(),{create:!0}),d=await s.createSyncAccessHandle();return new this(r,s,d)}async res(){return await i(this,o).flush(),await i(this,o).close(),await i(this,n).getFile()}async write(a,r){return i(this,o).write(a,{at:r})}async destroy(){await i(this,g).removeEntry(i(this,n).name)}static async isAvailable(){return i(this,l)===void 0&&y(this,l,await m(this,h,A).call(this)),i(this,l)}}g=new WeakMap,n=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakSet,A=async function(){let a=D(),r=!0;if(typeof navigator>"u")return!1;if("storage"in navigator&&"getDirectory"in navigator.storage){try{(await(await(await navigator.storage.getDirectory()).getFileHandle(a,{create:!0})).createSyncAccessHandle()).close()}catch{r=!1}try{await(await navigator.storage.getDirectory()).removeEntry(a,{recursive:!0})}catch{r=!1}return r}return!1},c(w,h),c(w,l);const S=async t=>{if(await w.isAvailable()){const e=await navigator.storage.getDirectory();try{await(await e.getDirectoryHandle(v)).removeEntry(t)}catch{}}},I=async()=>{if(await w.isAvailable()){const t=await navigator.storage.getDirectory();try{await t.removeEntry(v,{recursive:!0})}catch{}}};export{w as OPFSStorage,I as clearFileStorage,S as removeFromFileStorage};
//# sourceMappingURL=De4dRPKL.js.map
