import{F as i}from"./CRlX8TpR.js";import{s as g,d as n}from"./Hp68DFFA.js";import{t as p}from"./sLrbt0Jw.js";import{createDialog as v}from"./BrKf4TUx.js";const s=({url:t,file:e,body:o,urlType:r})=>{const a={type:"saving",id:"saving",file:e,url:t,urlType:r};o&&(a.bodyText=o),v(a)},c=t=>{const e=document.createElement("a"),o=URL.createObjectURL(t);e.href=o,e.download=t.name,e.click(),setTimeout(()=>URL.revokeObjectURL(o),1e4)},d=async t=>await(navigator==null?void 0:navigator.share({files:[t]})),h=t=>{if(!["http:","https:"].includes(new URL(t).protocol))return alert("error: invalid url!");if(!window.open(t,"_blank","noopener,noreferrer"))return s({url:t,body:i(p)("dialog.saving.blocked")})},m=async t=>await(navigator==null?void 0:navigator.share({url:t})),w=async t=>{var e;return await((e=navigator==null?void 0:navigator.clipboard)==null?void 0:e.writeText(t))},R=({url:t,file:e,urlType:o})=>{var a;if(!t&&!e)throw new Error("attempted to download void");const r=i(g).save.savingMethod;if(r==="ask")return s({url:t,file:e,urlType:o});if(!((a=navigator==null?void 0:navigator.userActivation)!=null&&a.isActive))return s({url:t,file:e,body:i(p)("dialog.saving.timeout"),urlType:o});try{if(e){if(n.is.iOS)return e.size<268435456?d(e):c(e);if(r==="share"&&n.supports.share)return d(e);if(r==="download")return c(e)}if(t){if(r==="share"&&n.supports.share)return m(t);if(r==="download"&&n.supports.directDownload&&!(n.is.iOS&&o==="redirect"))return h(t);if(r==="copy"&&!e)return w(t)}}catch{}return s({url:t,file:e,urlType:o})};export{c as a,d as b,w as c,R as d,h as o,m as s};
//# sourceMappingURL=Ddzr_Ig4.js.map
